<%- include('../partials/header') %>

<style>
    .admin-container {
        display: flex;
        min-height: 100vh;
    }
    .admin-content {
        margin-left: 260px;
        flex: 1;
        padding: 40px;
        background: linear-gradient(135deg, #FAFAFA 0%, #F5F5F5 100%);
        transition: margin-left 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .admin-sidebar.collapsed ~ .admin-content {
        margin-left: 70px;
    }
    .admin-link {
        display: block;
        padding: 15px;
        color: white;
        text-decoration: none;
        margin-bottom: 10px;
        border-radius: 4px;
        transition: background 0.3s;
    }
    .admin-link:hover, .admin-link.active {
        background: rgba(255,255,255,0.2);
    }
    .stats-grid-admin {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        margin: 30px 0;
    }
    .stat-card-admin {
        background: white;
        padding: 30px;
        border-radius: 12px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.08);
        text-align: center;
    }
        .stat-number-admin {
            font-size: 36px;
            font-weight: 700;
            color: #546E6A;
            margin-bottom: 10px;
        }
    .stat-label-admin {
        color: #666;
        font-size: 14px;
    }
</style>

<div class="admin-container">
    <%- include('partials/adminSidebarNew') %>
    <div class="admin-content">
        <h1>Admin Dashboard</h1>
        <div class="stats-grid-admin">
            <div class="stat-card-admin">
                <div class="stat-number-admin"><%= stats.totalBookings %></div>
                <div class="stat-label-admin">Total Bookings</div>
            </div>
            <div class="stat-card-admin">
                <div class="stat-number-admin"><%= stats.newBookings %></div>
                <div class="stat-label-admin">New Bookings</div>
            </div>
            <div class="stat-card-admin">
                <div class="stat-number-admin"><%= stats.totalMessages %></div>
                <div class="stat-label-admin">Total Messages</div>
            </div>
            <div class="stat-card-admin">
                <div class="stat-number-admin"><%= stats.newMessages %></div>
                <div class="stat-label-admin">New Messages</div>
            </div>
            <div class="stat-card-admin">
                <div class="stat-number-admin"><%= stats.totalServices %></div>
                <div class="stat-label-admin">Services</div>
            </div>
            <div class="stat-card-admin">
                <div class="stat-number-admin"><%= stats.totalPortfolio %></div>
                <div class="stat-label-admin">Portfolio Items</div>
            </div>
        </div>
        
        <h2 style="margin-top: 40px;">Recent Bookings</h2>
        <table style="width: 100%; background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 15px rgba(0,0,0,0.08);">
            <thead style="background: #546E6A; color: white;">
                <tr>
                    <th style="padding: 15px; text-align: left;">Name</th>
                    <th style="padding: 15px; text-align: left;">Event Type</th>
                    <th style="padding: 15px; text-align: left;">Date</th>
                    <th style="padding: 15px; text-align: left;">Status</th>
                </tr>
            </thead>
            <tbody>
                <% recentBookings.forEach(booking => { %>
                    <tr style="border-top: 1px solid #f0f0f0;">
                        <td style="padding: 15px;"><%= booking.firstName %> <%= booking.lastName %></td>
                        <td style="padding: 15px;"><%= booking.eventType %></td>
                        <td style="padding: 15px;"><%= new Date(booking.date).toLocaleDateString() %></td>
                        <td style="padding: 15px;"><%= booking.status %></td>
                    </tr>
                <% }); %>
            </tbody>
        </table>
        
        <h2 style="margin-top: 40px;">Recent Messages</h2>
        <table style="width: 100%; background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 15px rgba(0,0,0,0.08);">
            <thead style="background: #546E6A; color: white;">
                <tr>
                    <th style="padding: 15px; text-align: left;">Name</th>
                    <th style="padding: 15px; text-align: left;">Subject</th>
                    <th style="padding: 15px; text-align: left;">Status</th>
                </tr>
            </thead>
            <tbody>
                <% recentMessages.forEach(message => { %>
                    <tr style="border-top: 1px solid #f0f0f0;">
                        <td style="padding: 15px;"><%= message.firstName %> <%= message.lastName %></td>
                        <td style="padding: 15px;"><%= message.subject %></td>
                        <td style="padding: 15px;"><%= message.status %></td>
                    </tr>
                <% }); %>
            </tbody>
        </table>
    </div>
</div>

<script src="/js/script.js"></script>
</body>
</html>

